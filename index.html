<html>
  <head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.3.1/p5.js"></script>
    <script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/p5.collide2d"></script>
    
    <style>
      body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background-color: pink;
      }
    </style>
  </head>

  <body>
    <script>
      let video;
      let poseNet;
      let pose;
      
      function setup() {
        createCanvas(window.innerWidth, window.innerHeight);
        background('pink');
        video = createCapture(VIDEO);
        video.hide();
        poseNet = ml5.poseNet(video, modelLoaded);
        poseNet.on("pose", gotPoses);
      }
      
      function gotPoses(poses) {
        if (poses.length > 0) {
          pose = poses[0].pose;
        }
      }
      
      function modelLoaded() {
        console.log("poseNet ready");
      }
      
      function draw() {
        clear();
        image(video, (window.innerHeight - 800)/2, window.innerHeight/6, 800, 600);
        
        if (pose) {
          fill(255, 0, 0);
          ellipse(pose.nose.x, pose.nose.y - 50, 30);
        }
      }
      
      function entity() {
        //nothing for now
      }
    </script>
  </body>
</html>
